<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Circuit Challenge</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    body{display:flex;flex-direction:column;align-items:center;gap:12px;padding:18px}
    h1{margin:0;font-size:20px}
    .board{width:720px;height:320px;border:2px dashed #999;border-radius:8px;position:relative;background:linear-gradient(180deg,#f8fafc,#eef2ff)}
    .parts{display:flex;gap:8px}
    .part{width:110px;padding:8px;border-radius:6px;background:white;box-shadow:0 2px 6px rgba(0,0,0,.08);cursor:grab;text-align:center}
    .part img{width:48px;height:48px;display:block;margin:6px auto}
    .slot{position:absolute;width:96px;height:48px;border:2px dashed transparent;border-radius:6px;display:flex;align-items:center;justify-content:center;color:#666}
    #batterySlot{left:28px;top:36px}
    #wireSlot{left:30px;top:140px}
    #bulbSlot{right:28px;top:88px}
    .placed{border-style:solid;border-color:#cbd5e1;background:#fff}
    #status{margin-top:8px}
    button{padding:8px 12px;border-radius:6px;border:0;background:#2563eb;color:white;cursor:pointer}
    .bulb-on{filter:drop-shadow(0 0 8px rgba(255,200,50,.9))}
    small{color:#444}
  </style>
</head>
<body>
  <h1>Circuit Challenge</h1>
  <div class="parts">
    <div class="part" draggable="true" data-type="battery" id="batteryPart">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48'><rect width='34' height='18' x='7' y='8' rx='3' fill='%232563eb'/><rect x='5' y='13' width='6' height='2' fill='%23fff'/></svg>"/>
      Battery
      <div><small>Provides power</small></div>
    </div>
    <div class="part" draggable="true" data-type="wire" id="wirePart">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48'><path d='M6 24c7-8 14-8 36 0' stroke='%23000' stroke-width='3' fill='none' stroke-linecap='round'/></svg>"/>
      Wire
      <div><small>Connects components</small></div>
    </div>
    <div class="part" draggable="true" data-type="bulb" id="bulbPart">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='48' height='48'><circle cx='24' cy='18' r='10' fill='%23ffd54a'/><rect x='18' y='28' width='12' height='10' rx='2' fill='%23bdbdbd'/></svg>"/>
      Bulb
      <div><small>Lights up if circuit complete</small></div>
    </div>
  </div>

  <div class="board" id="board">
    <div class="slot" id="batterySlot">Battery</div>
    <div class="slot" id="wireSlot">Wire</div>
    <div class="slot" id="bulbSlot">Bulb</div>
  </div>

  <div id="controls">
    <button id="checkBtn">Check Circuit</button>
    <button id="resetBtn" style="background:#6b7280;margin-left:8px">Reset</button>
    <div id="status"></div>
  </div>

  <script>
    // Simple drag & drop
    const parts = document.querySelectorAll('.part');
    const slots = document.querySelectorAll('.slot');
    let dragged = null;

    parts.forEach(p=>{
      p.addEventListener('dragstart', e=>{ dragged = p; setTimeout(()=>p.style.visibility='hidden',0); });
      p.addEventListener('dragend', e=>{ dragged = null; p.style.visibility='visible'; });
    });

    slots.forEach(s=>{
      s.addEventListener('dragover', e=>e.preventDefault());
      s.addEventListener('dragenter', e=>{ e.preventDefault(); s.style.borderColor='#60a5fa'; });
      s.addEventListener('dragleave', e=>{ s.style.borderColor='transparent'; });
      s.addEventListener('drop', e=>{
        s.style.borderColor='transparent';
        if(!dragged) return;
        // remove previously placed element if any
        const existing = s.querySelector('.placed');
        if(existing) existing.remove();
        const clone = dragged.cloneNode(true);
        clone.classList.add('placed');
        clone.style.position='relative';
        clone.style.left='0'; clone.style.top='0';
        clone.draggable=false;
        s.innerHTML='';
        s.appendChild(clone);
      });
    });

    function checkCircuit(){
      const battery = document.querySelector('#batterySlot .placed');
      const wire = document.querySelector('#wireSlot .placed');
      const bulb = document.querySelector('#bulbSlot .placed');
      const status = document.getElementById('status');
      if(battery && wire && bulb){
        // very simple logic: all three present -> success
        status.textContent='✅ Circuit complete! The bulb lights up.';
        const bulbImg = document.querySelector('#bulbSlot img');
        if(bulbImg) bulbImg.classList.add('bulb-on');
      } else {
        status.textContent='❌ Circuit incomplete. Place battery, wire, and bulb into slots.';
        const bulbImg = document.querySelector('#bulbSlot img');
        if(bulbImg) bulbImg.classList.remove('bulb-on');
      }
    }

    document.getElementById('checkBtn').addEventListener('click', checkCircuit);
    document.getElementById('resetBtn').addEventListener('click', ()=>{
      slots.forEach(s=>{ s.innerHTML = s.id.replace('Slot',''); s.classList.remove('occupied'); });
      document.getElementById('status').textContent='';
    });

    // small accessibility: allow keyboard placement
    parts.forEach((p,i)=>{
      p.tabIndex=0;
      p.addEventListener('keydown', e=>{
        if(e.key === 'Enter'){
          // cycle place into next empty slot
          for(const s of slots){ if(!s.querySelector('.placed')){ const clone=p.cloneNode(true); clone.classList.add('placed'); clone.draggable=false; s.innerHTML=''; s.appendChild(clone); break; } }
        }
      });
    });

  </script>
</body>
</html>

<!-- Short standalone CSS file: circuit-challenge.css -->
<!-- You can copy this into a separate .css file and link it from the HTML -->
<style>
:root{
  --bg: #f8fafc;
  --card: #ffffff;
  --accent: #2563eb;
  --muted: #6b7280;
}
html,body{height:100%;}
body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  margin:0; padding:18px; display:flex; flex-direction:column; align-items:center; gap:12px; background:var(--bg);
}
h1{margin:0; font-size:20px}
.parts{display:flex; gap:8px}
.part{
  width:110px; padding:8px; border-radius:6px; background:var(--card); box-shadow:0 2px 6px rgba(0,0,0,.08); cursor:grab; text-align:center;
}
.part img{ width:48px; height:48px; display:block; margin:6px auto }
.board{
  width:720px; height:320px; border:2px dashed #999; border-radius:8px; position:relative; background: linear-gradient(180deg,#f8fafc,#eef2ff);
}
.slot{
  position:absolute; width:96px; height:48px; border:2px dashed transparent; border-radius:6px; display:flex; align-items:center; justify-content:center; color:#666;
}
.placed{ border-style:solid; border-color:#cbd5e1; background:#fff }
#controls{ margin-top:8px }
button{ padding:8px 12px; border-radius:6px; border:0; background:var(--accent); color:white; cursor:pointer }
button.secondary{ background:#6b7280 }
.bulb-on{ filter: drop-shadow(0 0 8px rgba(255,200,50,.9)) }
small{ color:#444 }
</style>


<!-- Short standalone JS file: circuit-challenge.js -->
<script>
// Basic drag & drop logic
const parts = document.querySelectorAll('.part');
const slots = document.querySelectorAll('.slot');
let dragged = null;

parts.forEach(p => {
  p.addEventListener('dragstart', () => {
    dragged = p;
    setTimeout(() => p.style.visibility = 'hidden', 0);
  });
  p.addEventListener('dragend', () => {
    dragged = null;
    p.style.visibility = 'visible';
  });
});

slots.forEach(s => {
  s.addEventListener('dragover', e => e.preventDefault());
  s.addEventListener('dragenter', e => { e.preventDefault(); s.style.borderColor = '#60a5fa'; });
  s.addEventListener('dragleave', () => { s.style.borderColor = 'transparent'; });
  s.addEventListener('drop', () => {
    s.style.borderColor = 'transparent';
    if (!dragged) return;
    const existing = s.querySelector('.placed');
    if (existing) existing.remove();
    const clone = dragged.cloneNode(true);
    clone.classList.add('placed');
    clone.draggable = false;
    s.innerHTML = '';
    s.appendChild(clone);
  });
});

// Check the circuit
function checkCircuit() {
  const complete = ['batterySlot', 'wireSlot', 'bulbSlot']
    .every(id => document.querySelector(`#${id} .placed`));

  const bulbImg = document.querySelector('#bulbSlot img');
  const status = document.getElementById('status');

  if (complete) {
    status.textContent = '✅ Circuit complete! The bulb lights up.';
    if (bulbImg) bulbImg.classList.add('bulb-on');
  } else {
    status.textContent = '❌ Circuit incomplete. Place all components.';
    if (bulbImg) bulbImg.classList.remove('bulb-on');
  }
}

document.getElementById('checkBtn').addEventListener('click', checkCircuit);

document.getElementById('resetBtn').addEventListener('click', () => {
  slots.forEach(s => {
    s.innerHTML = s.id.replace('Slot', '');
  });
  document.getElementById('status').textContent = '';
});
</script>
